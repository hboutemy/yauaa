<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.104.3"><meta name=description content="This is a java library that tries to parse and analyze the useragent string (and when available the User-Agent Client Hints) and extract as many relevant attributes as possible."><meta name=author content="Niels Basjes"><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><link rel=manifest href=/favicon/manifest.json><link rel=mask-icon href=/favicon/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#2d89ef"><meta name=msapplication-TileImage content="/favicon/mstile-144x144.png"><meta name=theme-color content="#ffffff"><title>Yauaa: Yet Another UserAgent Analyzer | Yauaa - Yet Another UserAgent Analyzer</title><link href=/css/nucleus.css?1666716896 rel=stylesheet><link href=/css/fontawesome-all.min.css?1666716896 rel=stylesheet><link href=/css/hybrid.css?1666716896 rel=stylesheet><link href=/css/featherlight.min.css?1666716896 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1666716896 rel=stylesheet><link href=/css/auto-complete.css?1666716896 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1666716896 rel=stylesheet><link href=/css/theme.css?1666716896 rel=stylesheet><link href=/css/tabs.css?1666716896 rel=stylesheet><link href=/css/hugo-theme.css?1666716896 rel=stylesheet><link href=/css/theme-yauaa.css?1666716896 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1666716896></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style><script type=text/javascript>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){t="https://wa.basjes.nl/",_paq.push(["setTrackerUrl",t+"wa.php"]),_paq.push(["setSiteId","1"]);var t,n=document,e=n.createElement("script"),s=n.getElementsByTagName("script")[0];e.type="text/javascript",e.async=!0,e.src=t+"wa.js",s.parentNode.insertBefore(e,s)}()</script></head><body data-url=/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><p class=logo-bar>Yauaa</p></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1666716896></script>
<script type=text/javascript src=/js/auto-complete.js?1666716896></script>
<script type=text/javascript>var baseurl="/"</script><script type=text/javascript src=/js/search.js?1666716896></script></div><section id=homelinks><ul><li><a class=padding href=/><i class='fas fa-home'></i> Yauaa</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/expect/ title="What to expect" class=dd-item><a href=/expect/>What to expect</a><ul><li data-nav-id=/expect/fieldvalues/ title="Field values" class=dd-item><a href=/expect/fieldvalues/>Field values</a></li><li data-nav-id=/expect/performance/ title=Performance class=dd-item><a href=/expect/performance/>Performance</a></li><li data-nav-id=/expect/limitations/ title=Limitations class=dd-item><a href=/expect/limitations/>Limitations</a></li><li data-nav-id=/expect/manipulations/ title=Manipulations class=dd-item><a href=/expect/manipulations/>Manipulations</a></li><li data-nav-id=/expect/tryit/ title="Try it!" class=dd-item><a href=/expect/tryit/>Try it!</a></li></ul></li><li data-nav-id=/using/ title="Using the analyzer" class=dd-item><a href=/using/>Using Yauaa</a><ul><li data-nav-id=/using/clienthints/ title="User-Agent Client Hints" class=dd-item><a href=/using/clienthints/>User-Agent Client Hints</a></li><li data-nav-id=/using/memoryusage/ title="Memory usage" class=dd-item><a href=/using/memoryusage/>Memory usage</a></li><li data-nav-id=/using/webservlet/ title="The demonstration webservlet" class=dd-item><a href=/using/webservlet/>Webservlet</a></li><li data-nav-id=/using/kubernetes/ title=Kubernetes class=dd-item><a href=/using/kubernetes/>Kubernetes</a></li><li data-nav-id=/using/license/ title=Licence class=dd-item><a href=/using/license/>Licence</a></li></ul></li><li data-nav-id=/udf/ title="User Defined Functions" class=dd-item><a href=/udf/>User Defined Functions</a><ul><li data-nav-id=/udf/apache-beam/ title="Apache Beam" class=dd-item><a href=/udf/apache-beam/>Apache Beam</a></li><li data-nav-id=/udf/apache-beam-sql/ title="Apache Beam SQL" class=dd-item><a href=/udf/apache-beam-sql/>Apache Beam SQL</a></li><li data-nav-id=/udf/apache-drill/ title="Apache Drill" class=dd-item><a href=/udf/apache-drill/>Apache Drill</a></li><li data-nav-id=/udf/apache-flink/ title="Apache Flink" class=dd-item><a href=/udf/apache-flink/>Apache Flink</a></li><li data-nav-id=/udf/apache-flink-table/ title="Apache Flink Table/SQL" class=dd-item><a href=/udf/apache-flink-table/>Apache Flink Table/SQL</a></li><li data-nav-id=/udf/apache-hive/ title="Apache Hive" class=dd-item><a href=/udf/apache-hive/>Apache Hive</a></li><li data-nav-id=/udf/apache-nifi/ title="Apache Nifi" class=dd-item><a href=/udf/apache-nifi/>Apache Nifi</a></li><li data-nav-id=/udf/apache-pig/ title="Apache Pig" class=dd-item><a href=/udf/apache-pig/>Apache Pig</a></li><li data-nav-id=/udf/commandline/ title="Commandline usage" class=dd-item><a href=/udf/commandline/>Commandline usage</a></li><li data-nav-id=/udf/elastic-logstash/ title="Elastic LogStash" class=dd-item><a href=/udf/elastic-logstash/>Elastic LogStash</a></li><li data-nav-id=/udf/elastic-search/ title="Elastic Search" class=dd-item><a href=/udf/elastic-search/>Elastic Search</a></li><li data-nav-id=/udf/logparser/ title=LogParser class=dd-item><a href=/udf/logparser/>LogParser</a></li><li data-nav-id=/udf/snowflake/ title=Snowflake class=dd-item><a href=/udf/snowflake/>Snowflake</a></li><li data-nav-id=/udf/snowplow/ title=Snowplow class=dd-item><a href=/udf/snowplow/>Snowplow</a></li><li data-nav-id=/udf/trino/ title=Trino class=dd-item><a href=/udf/trino/>Trino</a></li></ul></li><li data-nav-id=/developer/ title=Development class=dd-item><a href=/developer/>Development</a><ul><li data-nav-id=/developer/building/ title="Building from source" class=dd-item><a href=/developer/building/>Building from source</a></li><li data-nav-id=/developer/basedesign/ title="Base Design" class=dd-item><a href=/developer/basedesign/>Base Design</a></li><li data-nav-id=/developer/makingnewrules/ title="Making new rules" class=dd-item><a href=/developer/makingnewrules/>Making new rules</a></li><li data-nav-id=/developer/shadingdependencies/ title="Shading dependencies" class=dd-item><a href=/developer/shadingdependencies/>Shading dependencies</a></li><li data-nav-id=/developer/reportingissues/ title="Reporting issues" class=dd-item><a href=/developer/reportingissues/>Reporting issues</a></li></ul></li><li data-nav-id=/other/ title=Other class=dd-item><a href=/other/>Other</a><ul><li data-nav-id=/other/article/ title=Blogpost class=dd-item><a href=/other/article/>Blogpost</a></li><li data-nav-id=/other/relatedprojects/ title="Related projects" class=dd-item><a href=/other/relatedprojects/>Related projects</a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/nielsbasjes/yauaa><i class='fab fa-git-square'></i> Git repo</a></li><li><a class=padding href=https://github.com/nielsbasjes/yauaa/discussions><i class='fa fa-comment-alt'></i> Discussions</a></li><li><a class=padding href=https://github.com/nielsbasjes/yauaa/blob/main/CHANGELOG.md><i class='fa fa-file-alt'></i> Changelog</a></li><li><a class=padding href=https://github.com/nielsbasjes/yauaa/issues><i class='fa fa-bug'></i> Issue tracker</a></li><li><a class=padding href=https://github.com/nielsbasjes/yauaa/actions><img alt="Github actions Build status" src=https://img.shields.io/github/workflow/status/nielsbasjes/yauaa/Yauaa></a></li><li><a class=padding href=https://app.codecov.io/gh/nielsbasjes/yauaa><img alt="Coverage Status" src=https://img.shields.io/codecov/c/github/nielsbasjes/yauaa></a></li><li><a class=padding href=https://www.apache.org/licenses/LICENSE-2.0.html><img alt=License src=https://img.shields.io/:license-apache-blue.svg></a></li><li><a class=padding href=https://search.maven.org/#search%7Cga%7C1%7Cg%3A%22nl.basjes.parse.useragent%22><img alt="Maven Central" src=https://img.shields.io/maven-central/v/nl.basjes.parse.useragent/yauaa-parent.svg></a></li><li><a class=padding href=https://github.com/nielsbasjes/yauaa/stargazers><img alt="GitHub stars" src="https://img.shields.io/github/stars/nielsbasjes/yauaa?label=GitHub%20stars"></a></li><li><a class=padding href=https://hub.docker.com/r/nielsbasjes/yauaa><img alt="Docker Hub" src=https://img.shields.io/docker/pulls/nielsbasjes/yauaa></a></li><li><a class=padding href=https://www.paypal.me/nielsbasjes><img alt="If this project has business value for you then dont hesitate to support me with a small donation." src=https://img.shields.io/badge/Donations-via%20Paypal-blue.svg></a></li></ul></section><section id=footer><p>&copy;2013-2022 by <a href=https://niels.basjes.nl>Niels Basjes</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div id=head-tags></div><div id=body-inner><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i> navigation</a></span><h1 id=yauaa-yet-another-useragent-analyzer>Yauaa: Yet Another UserAgent Analyzer</h1><p>This is a java library that tries to parse and analyze the useragent string (and when available the User-Agent Client Hints) and extract as many relevant attributes as possible.</p><p>Works with Java, Scala, Kotlin and provides ready for use UDFs for several processing systems.</p><p>The full documentation can be found here <a href=https://yauaa.basjes.nl>https://yauaa.basjes.nl</a></p><hr><h2 id=high-profile-release-notes>HIGH Profile release notes:</h2><h1 id=v770>v7.7.0</h1><ul><li>Security:<ul><li>Updated Apache Commons Text to 1.10.0 (CVE-2022-42889)</li></ul></li><li>New/improved detections<ul><li>If the clienthints are available it is now possible to detect difference between Intel and ARM (M1/M2) on Apple laptops.</li><li>Several Federated Social Network related servers and clients.</li></ul></li><li>Webservlet:<ul><li>The GraphQL fields are now generated dynamically based on the available rules (The available fields with now also expose any custom fields).</li></ul></li></ul><h3 id=version-760>Version 7.6.0</h3><ul><li>New/improved detections<ul><li>Opera with reduced UserAgent now reports the correct agent version.</li></ul></li></ul><h3 id=version-750>Version 7.5.0</h3><ul><li>Report frozen <code>Mac OS X</code> versions as <code>Mac OS >=10.15.7</code> (was <code>??</code>) for all browsers (Chrome, Firefox, etc.):<ul><li>Always <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1175225">10_15_7</a> since Chrome 90.</li><li>Always <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent/Firefox#macintosh>10.15</a> since Firefox 87.</li></ul></li></ul><h3 id=version-740>Version 7.4.0</h3><ul><li>Report frozen <code>Mac OS</code> on Safari as <code>Mac OS >=10.15.7</code></li><li>New DeviceClass: &ldquo;Home Appliance&rdquo; (Fridges and such)</li><li>Oculus VR devices/OculusBrowser</li><li>Anonymization<ul><li>All anonymized agents have DeviceClass: &lsquo;Anonymized&rsquo;</li><li>More extensive anonymization detection by looking at version patterns</li></ul></li><li>New field &ldquo;RemarkablePattern&rdquo; that will hold exceptional things that were detected.<ul><li>Now: &ldquo;Anonymized&rdquo;, &ldquo;Hacker&rdquo;, &ldquo;Double UserAgent&rdquo; and &ldquo;Windows NT 9&rdquo;</li><li>The <strong>&lsquo;Anonymized&rsquo; field has been dropped</strong> and is now <strong>RemarkablePattern: &lsquo;Anonymized&rsquo;</strong></li></ul></li><li>Webservlet:<ul><li>GraphQL support</li></ul></li></ul><h3 id=version-730>Version 7.3.0</h3><ul><li>Thanks to <a href=https://github.com/FrancoisDevemy5>https://github.com/FrancoisDevemy5</a> for providing many of the testcases used for improving this version</li><li>Improve Apple detection/reporting<ul><li>Apple<ul><li>Use information from Apple to complete the list of devices.</li><li>Apple CFNetwork+Darwin with CPU tag is macOS instead of iOS</li><li>Apple M1 CPU (hardly ever seen)</li><li>Apple watchOS</li></ul></li><li>Many browsers, security scanners and robots.</li><li>Improve the naming of all Google bot variants.</li></ul></li><li>Webservlet:<ul><li>The input UserAgent is now also part of the output to allow easier processing.</li></ul></li></ul><h3 id=version-710>Version 7.1.0</h3><ul><li>Analyzer<ul><li>Simplify using Java 8 compliant caching</li></ul></li><li>New/improved detections<ul><li>Chrome OS/Chromebooks:<ul><li>Handle new &ldquo;frozen Chrome OS&rdquo; tag</li><li>The DeviceBrand of a Chromebook is &ldquo;Unknown&rdquo; instead of Google</li><li>Fixed Version and OS Build tags</li></ul></li></ul></li></ul><h3 id=version-700>Version 7.0.0</h3><ul><li>Dropping support for Apache Pig. The last release was in 2017: about 5 years ago.</li><li>Support for using ClientHints in addition to the User-Agent</li><li>Improve Apple detection/reporting<ul><li>&ldquo;Mac OS X&rdquo; / &ldquo;OS X&rdquo; / &ldquo;macOS&rdquo;<ul><li>The Major Version for the 10.x.x versions is now 2 parts (like &lsquo;10.6&rsquo;) instead of just &lsquo;10&rsquo;.</li><li>Although the marketing name has changed several times: For all versions <code>OperatingSystemName = 'Mac OS'</code> is used to ensure stable reporting.</li></ul></li><li>Darwin will be reported as the most likely iOS version instead.</li></ul></li></ul><h3 id=main-points-from-previous-releases>Main points from previous releases</h3><ul><li>Many fixes around Reducing/Freezing the User-Agent by the Chromium and Firefox teams.<ul><li>Handle the Edge 99+ edge://flags/#force-major-version-to-minor</li><li>Report frozen <code>Windows 10</code> on Chrome/Edge/&mldr; 92+ as <code>Windows >=10</code></li><li>Report frozen <code>Windows 10</code> on Firefox 88+ as <code>Windows >=10</code></li><li>Report frozen <code>Mac OS X</code> versions as <code>??</code>:<ul><li>Always <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1175225">10_15_7</a> since Chrome 90.</li><li>Always <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent/Firefox#macintosh>10.15</a> since Firefox 87.</li></ul></li></ul></li><li>Updates because of Log4Shell</li><li>New UDF for <a href=https://trino.io/>Trino</a> (a.k.a. Presto SQL)<ul><li>See <a href=https://yauaa.basjes.nl/udf/trino/>https://yauaa.basjes.nl/udf/trino/</a> for usage information.</li></ul></li><li>New UDF for ElasticSearch 8 besides the ES 7 variant because of breaking change in ES 7->8</li><li>Switched the default caching implementation to <a href=https://github.com/ben-manes/caffeine>Caffeine</a></li></ul><p>and ofcourse several improved detections</p><ul><li>Detect several types of TVs and Set-top boxes better. Contributed by <a href=https://github.com/samhendley/>Sam Hendley</a>.</li></ul><hr><h2 id=regarding-the-recent-log4j2-issues>Regarding the recent Log4J2 issues</h2><p>The Yauaa analyzer uses the Log4J2 API to do the logging and through the included dependencies also JCL and SLF4J are needed to run.</p><p>TL;DR:</p><ul><li><strong>The core of Yauaa is safe</strong> as it does not include any logging dependencies and expects the application to provide everything.</li><li><strong>In normal operations user input is not logged</strong>.</li><li>The <strong>Snowflake UDF is affected</strong> by these problems (due to shading the dependencies in).</li></ul><h3 id=no-batteries-included>NO batteries included</h3><p>By design the Yauaa library expects the application in which it is used to provide the actual logging dependencies and configuration.
If you do not provide the needed logging classes it will simply fail at startup.</p><p>So by design the Yauaa library expects all of these frameworks to be provided (and configured) and does not include any of them or any configuration for them.</p><p>This is true for most of the released artifacts (including the base library) except for the Snowflake UDF which does include almost all dependencies.
So the Snowflake UDF IS affected by this issue and all users are recommended to update.</p><h3 id=minimal-logging>Minimal logging</h3><p>Note that Yauaa does not log any user input and/or analysis results from user input during normal operation.
Only during development and during unit tests the Useragents are logged.</p><p>This is because it was designed to run in very large scale batch and streaming situations (very large as in &ldquo;Let&rsquo;s analyze these 10^10 records&rdquo;).</p><h3 id=bring-your-own-batteries>Bring your own batteries</h3><p>To assist in running Yauaa without the logj4-core jar an example was created that only uses SLF4J: <a href=https://github.com/nielsbasjes/yauaa/tree/main/analyzer/src/it/Examples/java-slf4j>here</a>.</p><hr><h2 id=donations>Donations</h2><p>If this project has business value for you then don&rsquo;t hesitate to support me with a small donation.</p><p><a href=https://www.paypal.me/nielsbasjes><img src=https://img.shields.io/badge/Donations-via%20Paypal-blue.svg alt="Donations via PayPal"></a></p><hr><h2 id=license>License</h2><pre><code>Yet Another UserAgent Analyzer
Copyright (C) 2013-2022 Niels Basjes

Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1666716896></script>
<script src=/js/perfect-scrollbar.min.js?1666716896></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1666716896></script>
<script src=/js/jquery.sticky.js?1666716896></script>
<script src=/js/featherlight.min.js?1666716896></script>
<script src=/js/highlight.pack.js?1666716896></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1666716896></script>
<script src=/js/learn.js?1666716896></script>
<script src=/js/hugo-learn.js?1666716896></script></body></html>